<!--pages/application-list/application-list.wxml-->
<!--以service-list为蓝本修改,感谢hrz shn-->

<van-notify id="van-notify" />
<van-toast id="van-toast" />
<van-dialog id="van-dialog"></van-dialog>

<view>
  <!-- 加载中 -->
  <view wx:if="{{ applicationsLoading }}">
    <van-loading> 正在加载申请表... </van-loading>
  </view>

  <!-- 没有未审核申请表 -->
  <view
    class="centerTitle"
    wx:if="{{ applications.length === 0}}"
    class="noApplication"
  >
    没有未审核申请表
  </view>

  <!-- 有未审核申请表 -->
  <view class="maptitle" wx-else>
    <view class="title">
      待审核志愿者申请
    </view>
  </view>

  <view>
    <van-collapse
      value="{{ activeNames }}"
      bind:change="onChange"
      accordion
    >
      <van-collapse-item wx:for="{{ applications }}" icon="/res/icons/verifyingOrder.png">
        <view slot="title" class="viewTitle"> {{ item.userName }} </view>
        <view slot="value" class="viewValue"> 学号: {{(item.studentId ? item.studentId:'未填写学号')}} </view>

        <van-cell title="年级"> {{ item.grade? item.grade: '未填写' }} </van-cell>
        <van-cell title="学院"> {{ item.department? item.department: '未填写' }} </van-cell>
        <van-cell title="手机号"> {{ item.phoneNumber? item.phoneNumber: '未填写' }} </van-cell>
        <van-cell title="申请原因"> {{ item.reasonForApplication? item.reasonForApplication: '未填写' }} </van-cell>

        <van-field
          model:value="{{ replyByAdmin }}"
          label="回复"
          required
          class="application-reply"
        />

        <view class="mapbuttons">
          <view class="bottons">
            <van-button
              type="primary"
              size="large"
              plain
              round
              bindtap="onConfirm"
              data-status='1'
              data-id="{{item.formId}}"
              data-url="{{'/pages/service-detail/service-detail?id='+item.serviceEventId}}"
            >通过
            </van-button>
          </view>
          <view class="bottons">
            <van-button
              type="danger"
              size="large"
              plain
              round
              bindtap="onFeedBack"
              data-status='2'
              data-id="{{item.formId}}"
              data-url="{{'/pages/service-detail/service-detail?id='+item.serviceEventId}}"
            >拒绝
            </van-button>
          </view>
        </view>
      </van-collapse-item>
    </van-collapse>
  </view>

  <van-popup
    show="{{ feedBackShow }}"
    bind:close="feedBackClose"
    position="bottom"
  >
    <van-cell-group>
      <van-field
        id="department"
        model:value="{{ adminFeedBack }}"
        label="反馈信息"
        placeholder="学生证照片不清晰"
      />
      <van-button
        type="danger"
        size="large"
        bindtap="onReject"
      > 确认
      </van-button>
    </van-cell-group>
  </van-popup>

  <view class="blank"></view>
</view>

